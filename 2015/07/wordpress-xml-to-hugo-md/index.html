<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <title>
    Wordpress XML to Hugo MD // mtik00
  </title>

  <link href="http://gmpg.org/xfn/11" rel="profile">
<meta http-equiv="content-type" content="text/html; charset=utf-8">


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="">
<meta name="generator" content="Hugo 0.14" />

  <meta property="og:title" content="Wordpress XML to Hugo MD" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />
<meta property="og:url" content="https://mtik00.com/2015/07/wordpress-xml-to-hugo-md/" />


  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/base-min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css">
  
  
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/grids-responsive-min.css">
  
  

  <link rel="stylesheet" href="/css/redlounge.css?v1">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='//fonts.googleapis.com/css?family=Raleway:400,200,100,700,300,500,600,800' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Libre+Baskerville:400,700,400italic' rel='stylesheet' type='text/css'>

  
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="mtik00" />

  

  

  

  <link rel="stylesheet" href="/css/mtik00.css?v1">

</head>

<body>
	

	<div id="layout" class="pure-g">
    

<div class="sidebar pure-u-1 pure-u-md-1-4">
  <div class="header">
    

    <h1 class="brand-title">mtik00</h1>
    <h2 class="brand-tagline">Musings on software</h2>

    <nav id="primary_nav_wrap">
      <ul>
        
        <li><span class="nav-item-separator">//</span><a href="https://mtik00.com">Home</a></li>
        
            
                <li><span class="nav-item-separator">//</span><a href="/about/">About</a></li>
            
        
            
                <li><span class="nav-item-separator">//</span><a href="/archives/">Archives</a></li>
            
        
      </ul>
    </nav>

    
        <div class="social-buttons">
        
            
                <a href="https://github.com/mtik00" target="_blank"><i class='fa fa-github fa-lg'></i></a>
            
        
            
                <a href="http://stackoverflow.com/users/3696827/mtik00" target="_blank"><i class='fa fa-stack-overflow fa-lg'></i></a>
            
        
            
                <a href="https://www.linkedin.com/in/timothymcfadden" target="_blank"><i class='fa fa-linkedin fa-lg'></i></a>
            
        
            
                <a href="http://feeds.feedburner.com/mtik00" target="_blank"><i class='fa fa-rss fa-lg'></i></a>
            
        

        </div>
    

  </div>
  
    <div>
        
<link rel="stylesheet" href="/css/lunr-search.css?v1">

<br><div id="search_box"><div id="search_text">Search:</div><div><input id="search" type="text"></div></div><ul id="results"></ul>

<script type="text/javascript" src="/js/jquery-1.11.1.min.js?v1"></script>
<script type="text/javascript" src="/js/lunr.min.js?v1"></script>
<script type="text/javascript" src="/js/lunr-search.js?v1"></script>

    </div>
  
</div>


	

    <div class="content pure-u-1 pure-u-md-3-4">
		<a name="top"></a>
		

		
			
		    <div id="toc" class="pure-u-1 pure-u-md-1-4">
				<small class="toc-label">Contents</small>
		   	 	<nav id="TableOfContents">
<ul>
<li><a href="#the-conversion:689bb1f7ccd933f475db2ace11b77cea">The Conversion</a></li>
</ul>
</nav>
		    </div>
		    
	    
  		<section class="post">
            <h1 class="post-title">
              <a href="/2015/07/wordpress-xml-to-hugo-md/">Wordpress XML to Hugo MD</a>
            </h1>
            <h3 class="post-subtitle">
            	
            </h3>
            
            	<span class="post-date">
                	<span class="post-date-day"><sup>30</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jul</span> <span class="post-date-year">2015</span>
            	</span>
            	
            
            	
            

			
			
				<div class="post-categories">
				
					<a class="post-category post-category-hugo" href="https://mtik00.com/categories/hugo">hugo</a>
				
				</div>
			

			

			

            

<p>I&rsquo;ve had a personal family blog in one form of another since 2002.  For the last 10 years, give or take, I used <a href="https://wordpress.com/">WordPress</a>.  It&rsquo;s a very fine and handy tool; especially for non-technical types.  That&rsquo;s the real issue&hellip; I&rsquo;m a <em>technical type</em>.  I started looking for something simpler, easier to maintain, and more secure.  That led me to <em>static site generators</em>.</p>

<p>I won&rsquo;t go into the details, but there <a href="http://lmgtfy.com/?q=static+site+generators">are a few to choose from</a>.  I settled on <a href="http://gohugo.io/">Hugo</a>.  I was mainly interested in it because it seemed easy, was written in <a href="http://golang.org/">Go</a>, and yes, it had a pretty website.</p>

<h1 id="the-conversion:689bb1f7ccd933f475db2ace11b77cea">The Conversion</h1>

<p>One of the many nice things about WordPress is the ability to export your site into XML (side note, I <em>loath</em> XML).  There are some examples and script that do the conversion for you, but what fun would that be?  In the process, I learned that:</p>

<ol>
<li>Most HTML is Markdown compliant (that is, Markdown &ldquo;understands&rdquo; it)</li>
<li>It&rsquo;s hard to tell an HTML-to-MD converter exactly how you want the HTML parsed.</li>
</ol>

<p>On to the script!  <a href="https://gist.github.com/mtik00/75c8f555b49365395e32">You can view the script here.</a>.  I won&rsquo;t go over it in gory detail, but here are the basics.</p>

<p>WP exports everything, but I was only concerned with the post <code>body</code>, the date it was published (<code>pubDate</code>), the <code>category</code>&rsquo;s (I called them <code>tags</code> in the script), the <code>title</code>, and where it should go.  The last part took some predetermined knowledge of how I wanted my Hugo site to be set up (read <a href="http://gohugo.io/extras/permalinks/"><code>[permalinks]</code></a>).  If you look at the exported XML file, there are <em>lots</em> of metadata that I&rsquo;m ignoring (YMMV).</p>

<p>
    tree = ET.parse(xml_path)
    channel = tree.find("channel")
    wp_version_check(channel)

    for post in channel.findall("item"):
        print "post title:", post.find("title").text
</p>

<p>WP puts all of the posts in a &lt;channel&gt; element.  Each post is located inside an &lt;item&gt; element.  So far, so good!  Now all we need to do is to loop through each item and grab the data we need.</p>

<p>
def wp_to_hugo_date(wp_date):
    """Converts a UTC time string from the WordPress XML to a Hugo time string."""
    date = time.strptime(wp_date, "%a, %d %b %Y %H:%M:%S +0000")
    date = calendar.timegm(date)
    ltime = time.localtime(date)
    date = time.strftime("%Y-%m-%dT%H:%M:%S", ltime)

    date += "%+03i:00" % (-1 * (time.altzone / 3600) if time.daylight else (-1 * (time.timezone / 3600)))
    return ltime, date
</p>

<p>I&rsquo;m using this function to convert the <code>pubDate</code> from WordPress to the format that Hugo uses.  Nothing real special here, although I&rsquo;m sure there&rsquo;s a much better way to calculate the time zone.  The string-formatted <code>pubDate</code> will go into the posts front matter, and I parse <code>ltime</code> to figure out where the post should go.</p>

<p>That&rsquo;s the basics.  I ran this script on my entire WordPress XML dump (only 90+ pages, nothing too big).  It created all of the Markdown posts full of HTML.  It was up to me to then go in and adjust some of the HTML so it was rendered a little better by Hugo.  Most of my time spent was on downloading images, checking them into Git, and reworking the gallery posts to use my new template (which is awesome, because now I can use <code>{{ gallery path/to/gallery/folder }}</code> in my markdown).</p>

<p>The point is, however, I was able to have a fully functioning port of my WordPress blog to Hugo in a matter of hours (the script only took a second to run).  Woot!</p>


			

			

			
				<div class="paging">
					<span class="paging-label">More Reading</span>
					
					<div class="paging-newer">
						<span class="dark-red">Newer</span><span class="decorative-marker">//</span>
						<a class="paging-link" href="/2015/08/nginx-proxy-for-github-pages/">Nginx Proxy for GitHub Pages</a>
		            </div>
		            

					
					<div class="paging-older">
						<span class="dark-red">Older</span><span class="decorative-marker">//</span>
			            <a class="paging-link" href="/archives/empty/">Archive Place Holder</a>
		            </div>
		            
	            </div>
            
          </section>
          
          	<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'mtik00';
    var disqus_identifier = 'https:\/\/mtik00.com\/2015\/07\/wordpress-xml-to-hugo-md\/';
    var disqus_title = 'Wordpress XML to Hugo MD';
    var disqus_url = 'https:\/\/mtik00.com\/2015\/07\/wordpress-xml-to-hugo-md\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          

      <div class="footer">
	<hr class="thin" />
	<div class="pure-menu pure-menu-horizontal pure-menu-open">
		<ul class="footer-menu">
		
		</ul>
	</div>

	<p><a rel='license' href='http://creativecommons.org/licenses/by-nc-sa/4.0/' target='_blank'><img alt='Creative Commons License' style='border-width:0' src='https://licensebuttons.net/l/by-nc-sa/4.0/88x31.png' /></a><br /><span xmlns:dct='http://purl.org/dc/terms/' property='dct:title'>mtik00.com</span> by <a xmlns:cc='http://creativecommons.org/ns#' href='http://mtik00.com' property='cc:attributionName' rel='cc:attributionURL' target='_blank'>Timothy McFadden</a> is licensed under a <a rel='license' href='http://creativecommons.org/licenses/by-nc-sa/4.0/' target='_blank'>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</p>
</div>
    </div>
  </div>
	

	

  
</body>
</html>
