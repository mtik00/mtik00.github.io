<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Python on mtik00</title>
    <link>https://mtik00.com/categories/python/</link>
    <description>Recent content in Python on mtik00</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 09 Nov 2017 14:52:30 -0700</lastBuildDate>
    <atom:link href="https://mtik00.com/categories/python/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Jinja2 Cache Busting URLs in Python</title>
      <link>https://mtik00.com/2017/11/jinja2-cache-busting-urls/</link>
      <pubDate>Thu, 09 Nov 2017 14:52:30 -0700</pubDate>
      
      <guid>https://mtik00.com/2017/11/jinja2-cache-busting-urls/</guid>
      <description>

&lt;p&gt;Cache busting is a technique the gives web developers a compromise between
asset load speeds and new features.  In this article,
we&amp;rsquo;ll discuss a &lt;em&gt;pure Python&lt;/em&gt; way of implementing this feature in your Jinja2
templates.&lt;/p&gt;

&lt;h1 id=&#34;what-is-caching:32848604b4bca00ae54abd221a684de4&#34;&gt;What is &amp;ldquo;caching&amp;rdquo;&lt;/h1&gt;

&lt;p&gt;NOTE: This article will not cover HTML cache headers, proxy settings, etc.&lt;/p&gt;

&lt;p&gt;Everything you see on a web page is &lt;em&gt;loaded&lt;/em&gt; from somewhere.  That &amp;ldquo;somewhere&amp;rdquo;
could be a VPS in the cloud, a &lt;a href=&#34;https://en.wikipedia.org/wiki/Content_delivery_network&#34;&gt;CDN&lt;/a&gt;
service like &lt;a href=&#34;https://www.cloudflare.com/&#34;&gt;CloudFlare&lt;/a&gt;, your machine, and so
on.  We&amp;rsquo;ll call these things &amp;ldquo;assets&amp;rdquo;.  Assets are images and text files used
to tell your browser how the page you are looking at should look.  These are
mostly things that don&amp;rsquo;t really change too often.&lt;/p&gt;

&lt;p&gt;Since assets don&amp;rsquo;t change often, you can &lt;em&gt;really&lt;/em&gt; speed up page loading by using
something called &amp;ldquo;cache&amp;rdquo;.  Serving files from the webserver can be really slow,
especially if it&amp;rsquo;s a very popular website, or your internet connection is slow.
The good news is that if you have visited that page recently, some or all of
the assets will already be on your computer.&lt;/p&gt;

&lt;p&gt;This all happens without much input from you, the user.  Your browser will
cache by default (unless using something like Tor Browser).  Even if you have
your browser cache disabled, the assets may be cached by a service like
&lt;a href=&#34;https://www.cloudflare.com/&#34;&gt;CloudFlare&lt;/a&gt;.  That&amp;rsquo;s out of your control.&lt;/p&gt;

&lt;p&gt;Quick loading is great, but what happens when the version of
&lt;code&gt;cute-puppy.jpg&lt;/code&gt; you have in your cache is different from what&amp;rsquo;s on the server?
You&amp;rsquo;ll continue to see the same old boring puppy image.
&lt;a href=&#34;https://en.wikipedia.org/wiki/Fear_of_missing_out&#34;&gt;FOMO&lt;/a&gt; anyone?&lt;/p&gt;

&lt;p&gt;There&amp;rsquo;s also evidence that search engines prioritize websites that use very
long cache times (e.g. Google&amp;rsquo;s own Page Insights tool).  A nice article on
how caching works can be found here: &lt;a href=&#34;https://jakearchibald.com/2016/caching-best-practices/&#34;&gt;https://jakearchibald.com/2016/caching-best-practices/&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&#34;busting-the-cache:32848604b4bca00ae54abd221a684de4&#34;&gt;Busting the cache&lt;/h1&gt;

&lt;p&gt;Web developers use a technique called &amp;ldquo;cache busting&amp;rdquo; to ensure that any
change to &lt;code&gt;cute-puppy.jpg&lt;/code&gt; is immediately seen by users.  They get around any
&amp;ldquo;cache&amp;rdquo; mechanism by generally taking 1 of these approaches:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Change the filename: Instead of &lt;code&gt;cute-puppy.jpg&lt;/code&gt;, they&amp;rsquo;ll use something
like &lt;code&gt;cute-puppy-v1.jpg&lt;/code&gt;.  If the change the content, they&amp;rsquo;ll change
the name to &lt;code&gt;cute-puppy-v2.jpg&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Change the URL: Instead of using &lt;code&gt;/static/images/cute-puppy.jpg&lt;/code&gt; in
HTML, they&amp;rsquo;ll use something like &lt;code&gt;/static/images/cute-puppy.jpg?v1&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The idea is the same.  Any change a developer makes to the &lt;em&gt;&amp;ldquo;asset&amp;rdquo;&lt;/em&gt; will cause
viewers to download the updated file.&lt;/p&gt;

&lt;p&gt;I prefer the second method.  I think this is cleaner, and causes less overall
churn in my source code control.&lt;/p&gt;

&lt;h1 id=&#34;pre-calculate-vs-jit:32848604b4bca00ae54abd221a684de4&#34;&gt;Pre-calculate vs JIT&lt;/h1&gt;

&lt;p&gt;The way I see it, you have two options here: 1) Use a build step to version your
assets; 2) perform a &amp;ldquo;just in time&amp;rdquo; calculation when the resource is requested.
This really depends on your process, but I don&amp;rsquo;t see a downside to pre-calculating a version.
This method should also perform much better under load.  Admittedly, I&amp;rsquo;m too lazy to measure
it, so &lt;a href=&#34;https://en.wiktionary.org/wiki/YMMV&#34;&gt;YMMV&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I decided to create a script that calculated the &lt;a href=&#34;https://en.wikipedia.org/wiki/Cyclic_redundancy_check&#34;&gt;CRC32&lt;/a&gt;
for each of my static images and store the result in a JSON file.  I load that
file at the start of my script.  This works great!  It does, however, cause a
lookup to occur each time the Jinja2 template is &lt;em&gt;rendered&lt;/em&gt;.  Jinja2 is pretty
good a caching rendered templates (moar cache!), so I think that&amp;rsquo;s fine.&lt;/p&gt;

&lt;p&gt;NOTE: You could also dynamically create this table at application start.  I
chose not to just to keep the start process simple and clean.&lt;/p&gt;

&lt;p&gt;Here&amp;rsquo;s my Python function to calculate the
&lt;a href=&#34;https://en.wikipedia.org/wiki/Cyclic_redundancy_check&#34;&gt;CRC32&lt;/a&gt; for each of my
images:
&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;td&gt;&lt;div class=&#34;linenodiv&#34; style=&#34;background-color: #f0f0f0; padding-right: 10px&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f0f0&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color: #0e84b5; font-weight: bold&#34;&gt;zlib&lt;/span&gt;
&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color: #06287e&#34;&gt;build&lt;/span&gt;():
    &lt;span style=&#34;color: #4070a0; font-style: italic&#34;&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span style=&#34;color: #4070a0; font-style: italic&#34;&gt;    Builds the release files&lt;/span&gt;
&lt;span style=&#34;color: #4070a0; font-style: italic&#34;&gt;    &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span style=&#34;color: #60a0b0; font-style: italic&#34;&gt;# Calculates and stores the CRC32 for all images in &amp;#39;static/images&amp;#39;&lt;/span&gt;
    outfile &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; os&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;path&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;join(THIS_DIR, &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;app&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;cachbuster.json&amp;#39;&lt;/span&gt;)
    image_dir &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; os&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;path&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;join(THIS_DIR, &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;html&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;static&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;images&amp;#39;&lt;/span&gt;)
    result &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; {}
    &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;for&lt;/span&gt; root, dirs, files &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;in&lt;/span&gt; os&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;walk(image_dir):
        &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;for&lt;/span&gt; fname &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;in&lt;/span&gt; files:
            fpath &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; root &lt;span style=&#34;color: #666666&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;/&amp;#39;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;+&lt;/span&gt; fname
            relpath &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; fpath[&lt;span style=&#34;color: #007020&#34;&gt;len&lt;/span&gt;(image_dir) &lt;span style=&#34;color: #666666&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color: #40a070&#34;&gt;1&lt;/span&gt;:]&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color: #4070a0; font-weight: bold&#34;&gt;\\&lt;/span&gt;&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;/&amp;#39;&lt;/span&gt;)
            prev &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #40a070&#34;&gt;0&lt;/span&gt;
            &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;for&lt;/span&gt; line &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color: #007020&#34;&gt;open&lt;/span&gt;(fpath, &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;rb&amp;#39;&lt;/span&gt;):
                prev &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; zlib&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;crc32(line, prev)
            result[relpath] &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color: #70a0d0; font-style: italic&#34;&gt;%x&lt;/span&gt;&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;%&lt;/span&gt; (prev &lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color: #40a070&#34;&gt;0xFFFFFFFF&lt;/span&gt;)

    &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;with&lt;/span&gt; &lt;span style=&#34;color: #007020&#34;&gt;open&lt;/span&gt;(outfile, &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;wb&amp;#39;&lt;/span&gt;) &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;as&lt;/span&gt; fh:
        fh&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;write(json&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;dumps(result, sort_keys&lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #007020&#34;&gt;True&lt;/span&gt;, indent&lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #40a070&#34;&gt;4&lt;/span&gt;, separators&lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt;(&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;,&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;: &amp;#39;&lt;/span&gt;)))
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/p&gt;

&lt;p&gt;The fancy &lt;code&gt;relpath&lt;/code&gt; thing is so the output is more manageable (more on that
later).  The file output looks a little like this:
&lt;a name=&#34;jsonfile&#34;&gt;&lt;/a&gt;
&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f0f0&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;{
    &lt;span style=&#34;color: #062873; font-weight: bold&#34;&gt;&amp;quot;about-us.jpg&amp;quot;&lt;/span&gt;: &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;8212d43f&amp;quot;&lt;/span&gt;,
    &lt;span style=&#34;color: #062873; font-weight: bold&#34;&gt;&amp;quot;favicon.ico&amp;quot;&lt;/span&gt;: &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;be79d92e&amp;quot;&lt;/span&gt;,
    &lt;span style=&#34;color: #062873; font-weight: bold&#34;&gt;&amp;quot;slider/title-img-01.jpg&amp;quot;&lt;/span&gt;: &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;5849f6f0&amp;quot;&lt;/span&gt;,
    &lt;span style=&#34;color: #062873; font-weight: bold&#34;&gt;&amp;quot;slider/title-img-02.jpg&amp;quot;&lt;/span&gt;: &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;a66c8271&amp;quot;&lt;/span&gt;,
    &lt;span style=&#34;color: #062873; font-weight: bold&#34;&gt;&amp;quot;slider/title-img-03.jpg&amp;quot;&lt;/span&gt;: &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;2e2cbe84&amp;quot;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;h1 id=&#34;jinja2:32848604b4bca00ae54abd221a684de4&#34;&gt;Jinja2&lt;/h1&gt;

&lt;p&gt;&lt;a href=&#34;http://jinja.pocoo.org/&#34;&gt;Jinja2&lt;/a&gt; is a templating tool used by many Python-based
web development frameworks (like &lt;a href=&#34;http://flask.pocoo.org/&#34;&gt;Flask&lt;/a&gt; and
&lt;a href=&#34;https://bottlepy.org&#34;&gt;bottle.py&lt;/a&gt;).  It&amp;rsquo;s really quite handy when it comes to
creating a single HTML file using nice
&lt;a href=&#34;https://en.wikipedia.org/wiki/Object-oriented_programming&#34;&gt;OO&lt;/a&gt;
concepts like inheritance.&lt;/p&gt;

&lt;h2 id=&#34;filter:32848604b4bca00ae54abd221a684de4&#34;&gt;Filter&lt;/h2&gt;

&lt;p&gt;The first thing we want to do is to add a custom Jinja2 &lt;em&gt;filter&lt;/em&gt;.  This is the
thing that will compare some input to our &lt;a href=&#34;#jsonfile&#34;&gt;JSON data&lt;/a&gt; and return a URL.&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f0f0&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;CACHEBUSTER &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; json&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;loads(&lt;span style=&#34;color: #007020&#34;&gt;open&lt;/span&gt;(THIS_DIR &lt;span style=&#34;color: #666666&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;/cachbuster.json&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;rb&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;read())
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;&lt;code&gt;CACHEBUSTER&lt;/code&gt; is just the data that was calculated during our build step.&lt;/p&gt;

&lt;p&gt;&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;td&gt;&lt;div class=&#34;linenodiv&#34; style=&#34;background-color: #f0f0f0; padding-right: 10px&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f0f0&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color: #06287e&#34;&gt;imageloader&lt;/span&gt;(partial_path):
    &lt;span style=&#34;color: #4070a0; font-style: italic&#34;&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span style=&#34;color: #4070a0; font-style: italic&#34;&gt;    Returns the path with a cachbuster tag if found, or the path otherwise.&lt;/span&gt;
&lt;span style=&#34;color: #4070a0; font-style: italic&#34;&gt;    &amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
    &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;if&lt;/span&gt; partial_path &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;in&lt;/span&gt; CACHEBUSTER:
        &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;/static/images/&amp;#39;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;+&lt;/span&gt; partial_path &lt;span style=&#34;color: #666666&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;?&amp;#39;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;+&lt;/span&gt; CACHEBUSTER[partial_path]

    &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;/static/images/&amp;#39;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;+&lt;/span&gt; partial_path
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/p&gt;

&lt;p&gt;The function &lt;code&gt;imageloader&lt;/code&gt; is the thing that we&amp;rsquo;ll use in our Jinja2 templates.
This function accepts a single input, &lt;code&gt;partial_path&lt;/code&gt;.  We check for the
existence of that path in our pre-compiled CRC32 data.  If we find it, we
return a URL with the calculation appended as a &amp;ldquo;query&amp;rdquo;.  If not, we&amp;rsquo;ll assume
that the path is relative to &lt;code&gt;/static/images/&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Using &lt;a href=&#34;#jsonfile&#34;&gt;our data&lt;/a&gt; file from above:
&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f0f0&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;print&lt;/span&gt; imageloader(&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;slider/title-img-01.jpg&amp;#39;&lt;/span&gt;)
&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;/static/images/slider/title-img-01.jpg?5849f6f0&amp;#39;&lt;/span&gt;
&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;print&lt;/span&gt; imageloader(&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;someimage.jpg&amp;#39;&lt;/span&gt;)
&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;/static/images/someimage.jpg&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;All good!  Any time we make a change to &lt;code&gt;slider/title-img-01.jpg&lt;/code&gt;, the
calculation will change, and we&amp;rsquo;ll get a new URL.  Any item that&amp;rsquo;s not
pre-calculated will be returned like normal.&lt;/p&gt;

&lt;p&gt;The last part is to tell Jinja2 about this new filter in &lt;code&gt;app.py&lt;/code&gt;.
&lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;td&gt;&lt;div class=&#34;linenodiv&#34; style=&#34;background-color: #f0f0f0; padding-right: 10px&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;1
2
3&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f0f0&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;jinja2_loader &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; jinja2&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;FileSystemLoader(TEMPLATE_DIR)
jinja2_env &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; jinja2&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;Environment(autoescape&lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #007020&#34;&gt;True&lt;/span&gt;, loader&lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt;jinja2_loader)
jinja2_env&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;filters[&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;imageloader&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; imageloader
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/p&gt;

&lt;p&gt;The magic is &lt;code&gt;3&lt;/code&gt;.  That tells Jinja2 to call our &lt;code&gt;imageloader()&lt;/code&gt; function any
time it sees a filter named &lt;code&gt;imageloader&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&#34;template-use:32848604b4bca00ae54abd221a684de4&#34;&gt;Template Use&lt;/h2&gt;

&lt;p&gt;Here&amp;rsquo;s how I use the new filter inside a template:
&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f0f0&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;&amp;lt;&lt;span style=&#34;color: #062873; font-weight: bold&#34;&gt;img&lt;/span&gt; &lt;span style=&#34;color: #4070a0&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;{{&amp;#39;slider/title-img-01.jpg&amp;#39; | imageloader}}&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #4070a0&#34;&gt;alt&lt;/span&gt;&lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;Title slider image 1&amp;quot;&lt;/span&gt;&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;&lt;code&gt;&#39;slider/title-img-01.jpg&#39;&lt;/code&gt; gets passed to our function, which returns
&lt;code&gt;&#39;/static/images/slider/title-img-01.jpg?5849f6f0&#39;&lt;/code&gt;.  That whole string then
goes into the template, resulting in this:
&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f0f0&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;&amp;lt;&lt;span style=&#34;color: #062873; font-weight: bold&#34;&gt;img&lt;/span&gt; &lt;span style=&#34;color: #4070a0&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;/static/images/slider/title-img-01.jpg?5849f6f0&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #4070a0&#34;&gt;alt&lt;/span&gt;&lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;Title slider image 1&amp;quot;&lt;/span&gt;&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;Perfect!  As long as we keep generating our JSON file during our build process,
the templates will always point to the latest asset without regard to our
cache settings.&lt;/p&gt;

&lt;h1 id=&#34;where-to-go-from-here:32848604b4bca00ae54abd221a684de4&#34;&gt;Where to go from here&lt;/h1&gt;

&lt;p&gt;I showed you how I cache-bust the images from one of my websites.  This is done
in pure Python, without other tools like &lt;code&gt;Grunt&lt;/code&gt;.  If you are already using
compile tools, you may as well find out how they do cache-busting.  But what
fun is that?&lt;/p&gt;

&lt;p&gt;This can be extended to your other assets.  For example, why not to your
&lt;code&gt;.css&lt;/code&gt; and &lt;code&gt;.js&lt;/code&gt; too?  That excersize is left up to the reader ;)&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>virtualenvwrapper-win &#34;No module named pip&#34;</title>
      <link>https://mtik00.com/2015/09/virtualenvwrapper-win-no-module-named-pip/</link>
      <pubDate>Wed, 09 Sep 2015 10:16:16 -0600</pubDate>
      
      <guid>https://mtik00.com/2015/09/virtualenvwrapper-win-no-module-named-pip/</guid>
      <description>&lt;p&gt;If you use virtualenvwrapper on Windows, you may have come across an issue where the environment cannot be created properly due to &amp;ldquo;ImportError: No module named pip&amp;rdquo;&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;ll let you Google the reason; here&amp;rsquo;s a fix.  Basically, you need to create the environment &lt;em&gt;without&lt;/em&gt; &lt;code&gt;setuptools&lt;/code&gt;.  Here are the basic steps:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;mkvirtualenv --no-setuptools --no-site-packages newenv&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;wget --no-check-cert https://raw.github.com/pypa/pip/master/contrib/get-pip.py&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;python get-pip.py&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;del get-pip.py&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Because I do this every so often, I&amp;rsquo;ve implemented my own &lt;code&gt;mkvirtualenv&lt;/code&gt; batch file like so:&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f0f0&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;@&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;echo&lt;/span&gt; off
&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;IF&lt;/span&gt; .&lt;span style=&#34;color: #bb60d5&#34;&gt;%1&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;==&lt;/span&gt; . (
    &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;echo&lt;/span&gt; Usage: mkvirtualenv &amp;#39;env name&amp;#39;
    &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;GOTO&lt;/span&gt; :&lt;span style=&#34;color: #002070; font-weight: bold&#34;&gt;eof&lt;/span&gt;
)

@&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;echo&lt;/span&gt; on
&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;call&lt;/span&gt; C:\Python27\Scripts\mkvirtualenv.bat --no-setuptools --no-site-packages &lt;span style=&#34;color: #bb60d5&#34;&gt;%1&lt;/span&gt;
wget --no-check-cert https://raw.github.com/pypa/pip/master/contrib/get-pip.py
python get-pip.py
&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;del&lt;/span&gt; get-pip.py
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;FYI: I store batch files like this in &lt;code&gt;C:\bin&lt;/code&gt;.  I then put &lt;code&gt;C:\bin&lt;/code&gt; in my path, so they&amp;rsquo;re available to all of my command-line activities.&lt;/p&gt;

&lt;p&gt;The batch file is not perfect, since the path to the actual &lt;code&gt;mkvirtualenv&lt;/code&gt; is hard coded, but it&amp;rsquo;s &lt;em&gt;far&lt;/em&gt; easier than trying to store the output of something like &lt;code&gt;python -c &amp;quot;import os,sys; print os.path.join(os.path.dirname(sys.executable), &#39;Scripts&#39;, &#39;mkvirtualenv.bat&#39;)&amp;quot;&lt;/code&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Django and Cripsy Form Login with Icons</title>
      <link>https://mtik00.com/2015/08/django-and-cripsy-form-login-with-icons/</link>
      <pubDate>Sun, 30 Aug 2015 21:55:57 -0600</pubDate>
      
      <guid>https://mtik00.com/2015/08/django-and-cripsy-form-login-with-icons/</guid>
      <description>&lt;p&gt;I recently created a website using the very nice &lt;a href=&#34;http://django-edge.readthedocs.org/en/latest/&#34;&gt;Edge&lt;/a&gt; template for a new Django site.  The log in form was nice, but I wanted a form with icons and no labels.  Here&amp;rsquo;s how I did it&amp;hellip;&lt;/p&gt;

&lt;p&gt;The greatest thing is that this was a &lt;em&gt;super easy&lt;/em&gt; change.  I think it looks a lot nicer, to boot.&lt;/p&gt;

&lt;p&gt;Here&amp;rsquo;s what the old login page looked like:

&lt;figure &gt;
    
        &lt;img src=&#34;https://mtik00.com/media/login-before.png&#34; alt=&#34;Default edge login template&#34; /&gt;
    
    
&lt;/figure&gt;
&lt;/p&gt;

&lt;p&gt;I used the incredible &lt;a href=&#34;http://django-crispy-forms.readthedocs.org/en/d-0/layouts.html?highlight=prependedtext&#34;&gt;&lt;code&gt;PrependedText&lt;/code&gt;&lt;/a&gt; FormHelper item to add a &lt;a href=&#34;http://fortawesome.github.io/Font-Awesome/&#34;&gt;Font Awesome&lt;/a&gt; icon before the field.  I had to set the field labels to empty-strings, as I:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Couldn&amp;rsquo;t figure out the &lt;code&gt;Field&lt;/code&gt; item to set inside &lt;code&gt;PrependedText&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Couldn&amp;rsquo;t use &lt;code&gt;self.helper.form_show_labels = False&lt;/code&gt; because I needed it for the &lt;code&gt;remember_me&lt;/code&gt; field.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Here&amp;rsquo;s the python code:
&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f0f0&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;    &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color: #06287e&#34;&gt;__init__&lt;/span&gt;(&lt;span style=&#34;color: #007020&#34;&gt;self&lt;/span&gt;, &lt;span style=&#34;color: #666666&#34;&gt;*&lt;/span&gt;args, &lt;span style=&#34;color: #666666&#34;&gt;**&lt;/span&gt;kwargs):
        &lt;span style=&#34;color: #007020&#34;&gt;super&lt;/span&gt;(LoginForm, &lt;span style=&#34;color: #007020&#34;&gt;self&lt;/span&gt;)&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color: #06287e&#34;&gt;__init__&lt;/span&gt;(&lt;span style=&#34;color: #666666&#34;&gt;*&lt;/span&gt;args, &lt;span style=&#34;color: #666666&#34;&gt;**&lt;/span&gt;kwargs)
        &lt;span style=&#34;color: #007020&#34;&gt;self&lt;/span&gt;&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;helper &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; FormHelper()
        &lt;span style=&#34;color: #007020&#34;&gt;self&lt;/span&gt;&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;fields[&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;username&amp;quot;&lt;/span&gt;]&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;label &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span style=&#34;color: #007020&#34;&gt;self&lt;/span&gt;&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;fields[&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;password&amp;quot;&lt;/span&gt;]&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;label &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span style=&#34;color: #007020&#34;&gt;self&lt;/span&gt;&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;helper&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;layout &lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt; Layout(
            PrependedText(&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;username&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;&amp;lt;i class=&amp;quot;fa fa-envelope-o&amp;quot;&amp;gt;&amp;lt;/i&amp;gt;&amp;#39;&lt;/span&gt;, placeholder&lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;Enter Email Address&amp;quot;&lt;/span&gt;),
            PrependedText(&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;password&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;&amp;lt;i class=&amp;quot;fa fa-key&amp;quot;&amp;gt;&amp;lt;/i&amp;gt;&amp;#39;&lt;/span&gt;, placeholder&lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;Enter Password&amp;quot;&lt;/span&gt;),
            HTML(&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;&amp;lt;a href=&amp;quot;{}&amp;quot;&amp;gt;Forgot Password?&amp;lt;/a&amp;gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color: #666666&#34;&gt;.&lt;/span&gt;format(
                reverse(&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;accounts:password-reset&amp;quot;&lt;/span&gt;))),
            Field(&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;remember_me&amp;#39;&lt;/span&gt;),
            Submit(&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;sign_in&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;#39;Log in&amp;#39;&lt;/span&gt;,
                   css_class&lt;span style=&#34;color: #666666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;btn btn-lg btn-primary btn-block&amp;quot;&lt;/span&gt;),
        )
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;Here&amp;rsquo;s the new login form:

&lt;figure &gt;
    
        &lt;img src=&#34;https://mtik00.com/media/login-after.png&#34; alt=&#34;New log in template&#34; /&gt;
    
    
&lt;/figure&gt;
&lt;/p&gt;

&lt;p&gt;The is subtle, but effective!  (I think so, anyways)&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Testing Pipelined Static Content</title>
      <link>https://mtik00.com/2015/08/testing-pipelined-static-content/</link>
      <pubDate>Mon, 10 Aug 2015 20:57:46 -0600</pubDate>
      
      <guid>https://mtik00.com/2015/08/testing-pipelined-static-content/</guid>
      <description>&lt;p&gt;After working quite hard on my &lt;code&gt;pre&lt;/code&gt; and &lt;code&gt;post&lt;/code&gt; Hugo pipeline, I needed a way to test the actual content that will be pushed to the server.  Python (once again) to the rescue!&lt;/p&gt;

&lt;p&gt;I &lt;em&gt;really&lt;/em&gt; love Hugo&amp;rsquo;s built-in server.  &lt;code&gt;hugo serve --watch&lt;/code&gt; is truly a great time saver.  However, it has nothing to do with our pipeline (fingerprinting, compressing, etc).  If we want to see what the end result is going to look like, we need a way to serve that content.&lt;/p&gt;

&lt;p&gt;Python has many built-in packages.  That&amp;rsquo;s the main reason it&amp;rsquo;s my language of choice.  Python has a simple web server ready to go.  I use &lt;code&gt;hugo serve --watch&lt;/code&gt; when I&amp;rsquo;m creating my content.  When I want to check the output of my pipeline, I use the following on the command-line:&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f0f0&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;cd &lt;span style=&#34;color: #666666&#34;&gt;&amp;lt;&lt;/span&gt;path to content&lt;span style=&#34;color: #666666&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color: #666666&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; python &lt;span style=&#34;color: #666666&#34;&gt;-&lt;/span&gt;m SimpleHTTPServer &lt;span style=&#34;color: #40a070&#34;&gt;8000&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;&lt;code&gt;python -m SimpleHTTPServer 8000&lt;/code&gt; tells Python to load the SimpleHTTPServer module and serve the content it finds in the current working directory on port 8000.  Technically, you are running &lt;code&gt;SimpleHTTPServer.__main__()&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The great thing about this is that I can run both the Python server and the Hugo server at the same time, depending on what I need.&lt;/p&gt;

&lt;p&gt;Here&amp;rsquo;s the batch file I use for this:
&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f0f0&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;@&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;echo&lt;/span&gt; off
&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;cd&lt;/span&gt; &lt;span style=&#34;color: #bb60d5&#34;&gt;%~dp0&lt;/span&gt;..

&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;echo&lt;/span&gt; &lt;span style=&#34;color: #bb60d5&#34;&gt;%1&lt;/span&gt;|findstr /xr &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;p&amp;quot;&lt;/span&gt; &amp;gt;nul &amp;amp;&amp;amp; (
  &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;goto&lt;/span&gt; :&lt;span style=&#34;color: #002070; font-weight: bold&#34;&gt;python&lt;/span&gt;
) || (
  &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;goto&lt;/span&gt; :&lt;span style=&#34;color: #002070; font-weight: bold&#34;&gt;hugo&lt;/span&gt;
)

:&lt;span style=&#34;color: #60a0b0; font-style: italic&#34;&gt;: =============================================================================&lt;/span&gt;
:&lt;span style=&#34;color: #60a0b0; font-style: italic&#34;&gt;: Run python on the already-built static pages.  This is for checking the end&lt;/span&gt;
:&lt;span style=&#34;color: #60a0b0; font-style: italic&#34;&gt;: result of the pipeline to ensure everything worked.&lt;/span&gt;
:&lt;span style=&#34;color: #002070; font-weight: bold&#34;&gt;python&lt;/span&gt;
&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;pushd&lt;/span&gt; mtik00.github.io
&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;start&lt;/span&gt; python -m SimpleHTTPServer 8000
&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;popd&lt;/span&gt;
&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;goto&lt;/span&gt; :&lt;span style=&#34;color: #002070; font-weight: bold&#34;&gt;end&lt;/span&gt;
:&lt;span style=&#34;color: #60a0b0; font-style: italic&#34;&gt;: =============================================================================&lt;/span&gt;

:&lt;span style=&#34;color: #60a0b0; font-style: italic&#34;&gt;: =============================================================================&lt;/span&gt;
:&lt;span style=&#34;color: #60a0b0; font-style: italic&#34;&gt;: Clean the Hugo build directory, then call Hugo to serve the content&lt;/span&gt;
:&lt;span style=&#34;color: #002070; font-weight: bold&#34;&gt;hugo&lt;/span&gt;
&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;IF&lt;/span&gt; &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;EXIST&lt;/span&gt; build (
    &lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;rmdir&lt;/span&gt; /q /s build
    sleep 1
)

&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;start&lt;/span&gt; hugo server --watch --source=&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;site&amp;quot;&lt;/span&gt; --bind=&lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;localhost&amp;quot;&lt;/span&gt;
&lt;span style=&#34;color: #007020; font-weight: bold&#34;&gt;goto&lt;/span&gt; :&lt;span style=&#34;color: #002070; font-weight: bold&#34;&gt;end&lt;/span&gt;
:&lt;span style=&#34;color: #60a0b0; font-style: italic&#34;&gt;: =============================================================================&lt;/span&gt;

:&lt;span style=&#34;color: #002070; font-weight: bold&#34;&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Create a Post Date/Time with Python</title>
      <link>https://mtik00.com/2015/08/create-a-post-date-time-with-python/</link>
      <pubDate>Sun, 09 Aug 2015 21:07:30 -0600</pubDate>
      
      <guid>https://mtik00.com/2015/08/create-a-post-date-time-with-python/</guid>
      <description>&lt;p&gt;I like to create draft posts as kind of &lt;em&gt;markers&lt;/em&gt; for things I want to write about in the future.  Unfortunately, when I do a &lt;code&gt;hugo new post...&lt;/code&gt;, the current date is already put in the front matter for me. That&amp;rsquo;s &lt;strong&gt;really&lt;/strong&gt; handy if I&amp;rsquo;m posting right away, but not so much if I have a &lt;em&gt;draft&lt;/em&gt; for a really long time.&lt;/p&gt;

&lt;p&gt;If you have Python installed on your system, here&amp;rsquo;s a quick one-liner to print out the current &lt;a href=&#34;https://docs.python.org/2/library/time.html?highlight=time.strftime#time.strftime&#34;&gt;date/time&lt;/a&gt; in Hugo&amp;rsquo;s (really Go&amp;rsquo;s) format:&lt;/p&gt;

&lt;p&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #f0f0f0&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;&lt;span&gt;&lt;/span&gt;python &lt;span style=&#34;color: #666666&#34;&gt;-&lt;/span&gt;c &lt;span style=&#34;color: #4070a0&#34;&gt;&amp;quot;import time; print time.strftime(&amp;#39;%Y-%m-&lt;/span&gt;&lt;span style=&#34;color: #70a0d0; font-style: italic&#34;&gt;%d&lt;/span&gt;&lt;span style=&#34;color: #4070a0&#34;&gt;T%H:%M:%S&amp;#39;, time.localtime()) + &amp;#39;&lt;/span&gt;&lt;span style=&#34;color: #70a0d0; font-style: italic&#34;&gt;%+03i&lt;/span&gt;&lt;span style=&#34;color: #4070a0&#34;&gt;:00&amp;#39; % (-1*(time.altzone / 3600) if time.daylight else (-1*(time.timezone/3600)));&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;

&lt;p&gt;I have that line wrapped in a batch file that I can run called &lt;code&gt;htime.bat&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;It&amp;rsquo;s quick and easy!  It&amp;rsquo;s &lt;em&gt;slightly&lt;/em&gt; easier than just changing it with your text editor.&lt;/p&gt;

&lt;p&gt;NOTE: This command only takes into consideration timezones that change on the hour!  Sorry &lt;a href=&#34;http://www.timeanddate.com/worldclock/india/new-delhi&#34;&gt;India&lt;/a&gt; (and more)&amp;hellip;&lt;/p&gt;

&lt;p&gt;UPDATE 8/10/2015: I just came across the &lt;a href=&#34;https://gohugo.io/commands/hugo_undraft/&#34;&gt;&lt;code&gt;hugo undraft&lt;/code&gt;&lt;/a&gt; command that does basically the same thing.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>